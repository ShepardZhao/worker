<!doctype html>
<html>
	<head>
		<title>web worker example</title>
	</head>

	<body>
		<script src="src/worker.js"></script>

		<script>
			var myWorker = $worker.create(function() {
        request('/bower.json');
        request('/package.json');
	    });

	    myWorker.loadScripts({
        //Could inject the angular $http service for example
	    	request: function(path) {
          var oReq = new XMLHttpRequest();

          oReq.onload = function() {
            self.postMessage({
              key: path,
              content: this.responseText
            });
          };

          oReq.open('GET', 'http://localhost:8080' + path, true);

          oReq.send();
	    	}
	    });

	    myWorker.onmessage = function(res) {
        console.log(res.data);
	    };

	    myWorker.postMessage();

		</script>
	</body>
</html>
