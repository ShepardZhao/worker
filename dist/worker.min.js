!function(){function n(){function n(n){var e=o(n);return s.push(e),e}function e(n){n=n||{};var e=s.map(function(e){return e.run(n)});return Promise.all(e)}function r(){s.forEach(function(n){n.terminate()}),s.length=0}function t(){return s}function o(n){var e=new Blob(["self.onmessage = ",n],{type:"text/javascript"});return{_shell:new Worker(window.URL.createObjectURL(e)),run:function(n){return n=n||{},u(this._shell,n)},terminate:function(){return i(this._shell)}}}function u(n,e){n.postMessage(e);var r=new Promise(function(e,r){n.onmessage=e,n.onerror=r});return r}function i(n){return s.splice(s.indexOf(n),1),n.terminate()}var s=[];return{create:n,runAll:e,terminateAll:r,list:t}}"undefined"!=typeof module&&module.exports?module.exports=n:window.$worker=n}();