function $worker(){function t(t){var r=Object.create(u);return r.blobArray=["self.onmessage = ",t.toString(),";"],i.call(r),c.push(r),r}function r(t){return a(u,t),this}function n(t){for(var r=0,n=c.length;n>r;r++)s.call(c[r],t);return this}function e(){for(var t=0,r=c.length;r>t;t++)c[t].shell.terminate();return c.length=0,this}function o(){return c}function s(t){t=t||{};var r=a({_src:window.location.protocol+"//"+window.location.host},t);this.shell.postMessage(r),this.shell.onmessage=this.onmessage,this.shell.onerror=this.onerror}function i(){this.blob=new Blob(this.blobArray,{type:"text/javascript"}),this.shell=new Worker(h(this.blob))}function a(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}function l(t){return"self."+t+" = "}var h=function(){try{return window.URL.createObjectURL}catch(t){throw new Error(t)}}(),c=[],u={postMessage:s,onmessage:function(){},onerror:function(){},terminate:function(){c.splice(c.indexOf(this),1),this.shell.terminate()},loadScripts:function(t){var r,n;for(var e in t)t.hasOwnProperty(e)&&(r=e,n=t[e],this.blobArray.unshift(";"),this.blobArray.unshift(n.toString()),this.blobArray.unshift(l(r)));i.call(this)},removeScripts:function(){for(var t,r=0,n=arguments.length;n>r;r++)t=this.blobArray.indexOf(l(arguments[r])),this.blobArray.splice(t,3);i.call(this)}};return{create:t,extend:r,postMessage:n,terminate:e,list:o}}