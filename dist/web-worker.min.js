function $worker(e,t){function n(e){var n=this;if(window.Worker)window.URL=window.URL||window.webkitURL,n._shell.postMessage(e),n._shell.onmessage=function(e){n.onmessage(e.data)};else{if("function"==typeof t)throw"web workers are not supported in your current browser";t(e)}}function o(){}function r(){var e=this;e._shell.terminate()}var s=new Blob(["self.onmessage = "+e.toString()],{type:"text/javascript"}),i=new Worker(window.URL.createObjectURL(s));return{_method:e,_shell:i,postMessage:n,onmessage:o,terminate:r}}